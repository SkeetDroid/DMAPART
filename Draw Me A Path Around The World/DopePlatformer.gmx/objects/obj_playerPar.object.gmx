<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_drew</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1215752191</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>vsp = 0; // vertical speed
hsp = 0; // horizontal speed
onGround = false; // is the player on the ground, or not? (in air)
onPlatform = false;
wall = false; // is the player touching a wall?
//wallSlide = false; // is the player wall SLIDING?
//wallJumpPenalty = 0; // the number of frames the players movement will be affected from wall jumping (to prevent easy wall climbing)
G = .5; // graviti 
vis = 0; // how is visible is the player right now?
controllerIndex = 0;
xSpawn = -35
previousSign = 1;

hp=100
angle=0
aiming=false
helditem=1
items[1]="Lead Boots"
items[2]="Magic Hourglass"
items[3]="Voodoo Wand"
items[4]="Bomb"
items[5]="Fire Brush"
items[6]="Ice Brush"
items[7]="Rubber Chicken"
leadboots=false
voodoo=false
hourglass=false
candraw=true
dev=false
fadingin=true
image_alpha=0

canmove=true
startx=x
starty=y

onfire=false

canbehit=true

//spawn other players if additional gamepads detected
var gp_num = gamepad_get_device_count();
show_debug_message("# Of GamePad Slots: " + string(gp_num));

show_debug_message(string(gamepad_is_connected(1)));
show_debug_message(string(gamepad_is_connected(2)));
show_debug_message(string(gamepad_is_connected(3)));
show_debug_message(string(gamepad_is_connected(4)));
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>onfire=false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x=startx
y=starty
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>canbehit=true
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Respawn

hp=100
canmove=true
fadingin=true
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
old walljump code
if(wallJumpPenalty &gt; 0){
    wallJumpPenalty -= 1; // manage walljump penalty timer
}
*/

handle_input();
handle_items()
prevent_collisions();
handle_animation();
if canmove=false {hsp=0 vsp=0}
if canmove=true
constainMovement();

if leadboots=true x += hsp/4 else x += hsp;
y += vsp;

//Death
if hp&lt;=0 {
    hp=0
    if canmove=true {
    canmove=false
    alarm[2]=60*2
    image_alpha=0
    alarm[0]=60*3
    instance_create(x,y,obj_player_fall)
    if global.stars&gt;0 {
        instance_create(x,y,obj_star_fall)
        global.stars-=1
    }
    onfire=false
    }
}

if fadingin=true {
    if image_alpha&lt;1 {
    image_alpha+=0.05
    }
    else {
    fadingin=false
    }
}

if onfire=true and canbehit=true {
    hp-=2
    if place_meeting(x,y,obj_lava) {
    hp-=25
    }
    alarm[1]=20
    canbehit=false
    if global.particles=true and hp&gt;0 {
        effect_create_below(ef_smokeup,x,y-16,0,c_red)
        effect_create_below(ef_smokeup,x,y-16,0,c_orange)
    }
}

if canbehit=false {
    if distance_to_object(obj_end_cloud)&gt;64
    image_blend=c_red
    else
    image_blend=c_white
}
else {
    image_blend=c_white
}


//If gamepad is used, enable it.
if global.gamepad=false
if gamepad_axis_value(0,gp_axislh)&gt;0.2 or
gamepad_axis_value(0,gp_axislh)&lt;-0.2 or
gamepad_axis_value(0,gp_axisrh)&gt;0.2 or
gamepad_axis_value(0,gp_axisrh)&lt;-0.2 or
gamepad_button_check(0,gp_face1) or
gamepad_button_check(0,gp_face2) or
gamepad_button_check(0,gp_face3) or
gamepad_button_check(0,gp_face4) or
gamepad_button_check(0,gp_padd) or
gamepad_button_check(0,gp_padr) or
gamepad_button_check(0,gp_padl) or
gamepad_button_check(0,gp_shoulderrb) or
gamepad_button_check(0,gp_shoulderr) or
gamepad_button_check(0,gp_shoulderlb) or
gamepad_button_check(0,gp_shoulderl) or
gamepad_button_check(0,gp_select) or
gamepad_button_check(0,gp_start) or
gamepad_button_check(0,gp_stickl) or
gamepad_button_check(0,gp_stickr)
{global.gamepad=true}

//If gamepad is enable and keyboard is used disable gamepad
if global.gamepad=true
if keyboard_check(ord("W")) or
keyboard_check(ord("A")) or
keyboard_check(ord("D")) or
keyboard_check(ord("Q")) or
keyboard_check(ord("E")) or
mouse_check_button(mb_left) 
{global.gamepad=false}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_drawing">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>y-=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_spikesPar">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if canbehit=true {
    if other.object_index=obj_lava
        {
        hp-=10
        onfire=true
        alarm[3]=60*3
        hsp=-hsp/2
        vsp=-vsp/2
        }
    else
        {
        hp-=75
        hsp=-hsp/2
        vsp=-vsp/2
        }
    alarm[1]=10
    canbehit=false
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemyPar">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if canbehit=true {
    hsp=-hsp
    vsp=-vsp/2
    hp-=10
    alarm[1]=10
    canbehit=false
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if obj_end_cloud.hit=false
hp=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if dev=true
    {
    visState = "";
    draw_set_color(color);
    //draw_text(x_draw,25+y_draw, "FPS: " + string(round(fps_real)));
    //draw_text(x_draw,50+y_draw,"Instances: " + string(instance_number(all)));
    draw_text(x_draw,100+y_draw, "Visibility: " + string(vis));
    draw_text(x_draw,125+y_draw,"OnGround: " + string(onGround));
    //draw_text(100,150," WallSliding: " + string(wallSlide));
    draw_text(x_draw,150+y_draw," onPlatform: " + string(onPlatform));
    draw_text(x_draw,200+y_draw, "hsp: " + string(hsp));
    draw_text(x_draw,225+y_draw, "vsp: " + string(vsp));
    draw_text(x_draw,250+y_draw, "Aiming: "+string(aiming))
    draw_text(x_draw,275+y_draw, "Aiming Angle: "+string(angle))
    draw_text(x_draw,300+y_draw, "Held Item: "+string(items[helditem]))
    draw_text(x_draw,325+y_draw, "Lead Boots Enabled: "+string(leadboots))
    draw_text(x_draw,350+y_draw, "Magic Hourglass Enabled: INDEV")
    draw_text(x_draw,375+y_draw, "Voodoo Wand Enabled: "+string(voodoo))
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self()
if aiming=true
draw_sprite_ext(spr_aim_line,0,x,y-32,1,1,angle,c_white,1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="123">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dev=!dev
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,16</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
